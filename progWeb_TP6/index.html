<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="keywords" content="HTML, quizz">
    <meta name="theme-color" content="#1bb566">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="main-19581404.png" type="image/png">
    <title>Todolist</title>
    <audio id="toggleSound" src="charming-twinkle-sound-for-fantasy-and-magic-250240.mp3" preload="auto"></audio>
    
    <style>body {
  font-family: 'Comic Neue', cursive;
  margin: 0;
  padding: 0;
  background: radial-gradient(ellipse at top, #fceff9 0%, #ffeefc 100%);
  background-size: cover;
  background-attachment: fixed;
  color: #4d3d56;
}

.container {
  max-width: 800px;
  background: rgba(255, 255, 255, 0.9);
  padding: 20px;
  margin: 30px auto;
  box-shadow: 0 0 20px #fbcce7;
  border-radius: 25px;
  border: 4px dashed #ffb3d1;
  animation: fadeIn 1s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

header {
  text-align: center;
  background: linear-gradient(to right, #ffc0cb, #ff99bb);
  color: white;
  padding: 25px;
  border-radius: 20px 20px 0 0;
  box-shadow: 0 5px 10px #f99ac9;
}

h1 {
  font-size: 2.4em;
  color: #fff;
  margin-bottom: 10px;
  text-shadow: 1px 1px #d75c97;
}

h2, h3 {
  color: #ff66b2;
  text-align: center;
}

section {
  background: #fff0f5;
  border-left: 5px dotted #ffaacc;
  padding: 20px;
  margin-bottom: 20px;
  border-radius: 20px;
  box-shadow: 2px 2px 10px #ffe0ed;
  transition: transform 0.3s ease-in-out;
}

section:hover {
  transform: scale(1.01);
}

label {
  font-weight: bold;
  color: #8b3052;
}

input[type=text],
input[type=url],
input[type=date],
select,
textarea {
  background-color: #ffffff;
  width: 100%;
  padding: 12px;
  border: 2px dashed #ff99bb;
  border-radius: 12px;
  box-sizing: border-box;
  margin-top: 6px;
  margin-bottom: 16px;
  font-family: 'Comic Neue', cursive;
}

input[type=submit],
button[type=button] {
  background-color: #ffc0cb;
  color: #8b3052;
  padding: 12px 20px;
  border: 2px dashed #ff99bb;
  border-radius: 25px;
  cursor: pointer;
  transition: background 0.3s, transform 0.2s;
  font-family: 'Comic Neue', cursive;
  font-weight: bold;
  box-shadow: 2px 2px 5px #ff99bb;
}

input[type=submit]:hover,
button[type=button]:hover {
  background-color: #ffb6c1;
  transform: scale(1.05);
}

a {
  color: #ff66b2;
  text-decoration: none;
  font-weight: bold;
}

a:hover {
  text-decoration: underline;
  color: #d14f88;
}

footer {
  text-align: center;
  font-size: 0.9em;
  background: #ffc0cb;
  color: #fff;
  padding: 15px;
  border-radius: 0 0 20px 20px;
  margin-top: 30px;
  box-shadow: 0 -3px 10px #fbcce7;
}

#switch {
  position: absolute;
  right: 20px;
  top: 20px;
  background: #ffe4ec;
  color: #8b3052;
  font-size: 0.9em;
  border-radius: 20px;
  border: 2px dashed #ffaacc;
  padding: 8px 15px;
  box-shadow: 2px 2px 0 #ffaacc;
  transition: all 0.3s;
}

#switch:hover {
  background-color: #ffccdd;
}

.dark-mode {
  background: #0f1021 url('https://cdn.pixabay.com/photo/2017/08/30/07/52/stars-2693203_1280.png') repeat;
  background-size: cover;
  color: #e0d7f9;
}

.dark-mode .container {
  background: #1e1e2e;
  color: #f5d0f7;
  border-color: #c084fc;
  box-shadow: 0 0 15px #c084fc;
}

.dark-mode header {
  background: linear-gradient(to right, #c084fc, #7c3aed);
  color: #fff;
  box-shadow: 0 3px 10px #a78bfa;
}

.dark-mode h1, .dark-mode h2, .dark-mode h3 {
  color: #e0c3fc;
  text-shadow: 1px 1px #4c1d95;
}

.dark-mode section {
  background: #2c2c3a;
  border-left: 5px dotted #c084fc;
  color: #fcefff;
}

.dark-mode input[type=text],
.dark-mode input[type=date],
.dark-mode input[type=url],
.dark-mode select,
.dark-mode textarea {
  background-color: #2a2139;
  color: #ffe6ff;
  border: 2px dashed #d8b4fe;
}

.dark-mode input[type=text]::placeholder,
.dark-mode textarea::placeholder {
  color: #bfa9dd;
}

.dark-mode input[type=submit],
.dark-mode button[type=button],
.dark-mode button {
  background-color: #a78bfa;
  color: #1e1e2e;
  border: 2px dashed #d8b4fe;
  box-shadow: 2px 2px 5px #6d28d9;
}

.dark-mode input[type=submit]:hover,
.dark-mode button[type=button]:hover,
.dark-mode button:hover {
  background-color: #c084fc;
  color: white;
}

.dark-mode footer {
  background: #7c3aed;
  color: #ffdcfa;
  box-shadow: 0 -3px 8px #a78bfa;
}

.dark-mode a {
  color: #c4b5fd;
}

.dark-mode a:hover {
  color: #e9d5ff;
}
#switch {
  display: block;
  margin: 30px auto 10px auto;
  background: #ffe4ec;
  color: #8b3052;
  font-size: 1em;
  border-radius: 20px;
  border: 2px dashed #ffaacc;
  padding: 10px 20px;
  box-shadow: 2px 2px 0 #ffaacc;
  transition: all 0.3s ease-in-out;
  font-family: 'Comic Neue', cursive;
  font-weight: bold;
  text-align: center;
  z-index: 1000;
}

#switch:hover {
  background-color: #ffccdd;
  transform: scale(1.05);
}

.dark-mode #switch {
  background: #c084fc;
  color: #1e1e2e;
  border-color: #d8b4fe;
  box-shadow: 2px 2px 5px #6d28d9;
}
form button[type="button"] {
  display: block;
  margin: 20px auto;
}
#tacheColor {
    color: #ffc0cb;
}
.dark-mode #tacheColor {
    color: #e0c3fc;
    text-shadow: 1px 1px #4c1d95;
}
    </style>
    <script id="priorityData" type="application/json">
        {
        "priorityOrder": [
            { "idPrio": 1, "priority": "Urgent" },
            { "idPrio": 2, "priority": "Très important" },
            { "idPrio": 3, "priority": "Important" },
            { "idPrio": 4, "priority": "Peu important" },
            { "idPrio": 5, "priority": "Optionel" }
        ]
        }
    </script>
</head>
<body>
    <noscript>Sorry, your browser does not support JavaScript!</noscript>
    <button id="switch" onclick="toggleDarkMode()">Mode nuit</button>
    <div class="container">
        <header>
            <h1>ToDoList</h1>
            <p>Une incroyable innovation proposée par moi-même.</p>
            <p>Faux, ça existait déjà, et en mieux.</p>
        </header>
        <section id="form">
            <div class="container">
                <h1 id="tacheColor">Ajouter une tâche</h1>
                <form id="todoForm">
                    <div class="form-group">
                        <label for="taskTitle">Titre de la tâche</label>
                        <input type="text" id="taskTitle" name="taskTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="taskDescription">Description</label>
                        <textarea id="taskDescription" name="taskDescription"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="taskDate">Date d'échéance</label>
                        <input type="date" id="taskDate" name="taskDate" required>
                    </div>

                    <div class="form-group">
                        <label for="taskPriority">Priorité</label>
                        <select id="taskPriority" name="taskPriority" required>
                            <option value="" disabled selected hidden>Please Choose...</option>
                        </select>

                        <script>
                            const priorityJSON = JSON.parse(document.getElementById("priorityData").textContent);
                            const selectPriority = document.getElementById("taskPriority");

                            priorityJSON.priorityOrder.forEach(item => {
                                const optionHTML = `<option value="${item.priority}">${item.priority}</option>`;
                                selectPriority.insertAdjacentHTML("beforeend", optionHTML);
                            });
                        </script>

                    </div>

                    <!--
                    <div class="form-group">
                        <label for="taskStatus">Statut</label>
                        <select id="taskStatus" name="taskStatus" required>
                            <option value="">Sélectionnez un statut</option>
                            <option value="À faire">À faire</option>
                            <option value="En cours">En cours</option>
                            <option value="Terminé">Terminé</option>
                        </select>
                    </div>
                    -->
                    <button type="button" onclick="saveTask()">Ajouter la tâche</button>
                </form>
            </div>
        </section>
        <section>
            <p style="text-align:center;">
                <a href="taches.html">Voir le résumé des tâches</a>
            </p>
        </section>
        <footer>
            <p>&copy; 2025 Joan Jacquin. All Rights Reserved.</p>
        </footer>
    </div>


    <script>
        function toggleDarkMode() {
            const btn = document.getElementById("switch");
            const sound = document.getElementById("toggleSound");
            const isDark = document.body.classList.toggle("dark-mode");

            // Joue le son pipou ✨
            sound.currentTime = 0;
            sound.play();

            // Met à jour le bouton
            btn.innerHTML = isDark ? "Mode clair" : "Mode nuit";

            // Sauvegarde l'état dans localStorage
            localStorage.setItem("theme", isDark ? "dark" : "light");
        }

        // Applique le thème sauvegardé dès le chargement
        window.addEventListener("DOMContentLoaded", () => {
            const savedTheme = localStorage.getItem("theme");
            const btn = document.getElementById("switch");

            if (savedTheme === "dark") {
            document.body.classList.add("dark-mode");
            btn.innerHTML = "Mode clair";
            } else {
            btn.innerHTML = "Mode nuit";
            }
        });
    </script>


    <script>
        function saveTask() {
            const form = document.getElementById("todoForm");

            // Vérifie la validité des champs
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            // Lecture des champs du formulaire
            let title = document.getElementById("taskTitle").value;
            let description = document.getElementById("taskDescription").value;
            let date = document.getElementById("taskDate").value;
            let priority = document.getElementById("taskPriority").value;

            // Initialisation ou récupération du tableau de tâches
            let taskList = [];
            const storedTasks = localStorage.getItem("taskList");

            if (storedTasks) {
                taskList = JSON.parse(storedTasks);
            }

            // Création de la tâche avec ID auto-incrémenté
            let newTask = {
                id: taskList.length + 1,
                title: title,
                description: description,
                date: date,
                priority: priority,
            };

            console.log("Nouvelle tâche :", newTask);

            // Ajout à la liste
            taskList.push(newTask);

            // Sauvegarde dans localStorage
            localStorage.setItem("taskList", JSON.stringify(taskList));

            // Réinitialisation du formulaire
            form.reset();
        }
    </script>
</body>
</html>